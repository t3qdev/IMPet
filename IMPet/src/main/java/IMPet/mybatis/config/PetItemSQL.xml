<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="PetItemSQL">
	
	<sql id="seletALL" > 
		<![CDATA[ SELECT * FROM PET_ITEM ]]>
	</sql>
	
	<sql id="where-no"> 
		<![CDATA[ WHERE ITEM_NO = #{ITEM_NO} ]]> 
	</sql>
	
	
	<!-- 상품 전체 리스트 -->
	<select id="selectAll" resultType="hashmap">
		<include refid="seletALL"/>
		<![CDATA[ ORDER BY ITEM_NO DESC ]]>
	</select>
	
	<!-- 상품 리스트 -->
	<select id="selectList" parameterType="hashmap" resultType="hashmap">
			<include refid="common.pagingPre"/>
			<![CDATA[
			select
				row_number() over (order by ITEM_NO desc) rnum, 
				ITEM_NO, ITEM_NAME, ITEM_IMG, ITEM_DETAIL, ITEM_PRICE, ITEM_TOTALCOUNT, ITEM_SELLCOUNT, ITEM_TYPE, ITEM_DETAILIMG
					from 
						pet_item
					
			]]>
			<include refid="common.pagingPost"/>
	</select>
	
	
	<!-- 상품 상세보기 -->
	<select id="selectOne" resultType="hashmap" parameterType="hashmap">
		<include refid="seletALL"/> 
		<include refid="where-no"/>
	</select>
	
	<!-- 관리자 상품 추가 -->
	<insert id="itemInsert" parameterType="hashmap">
		insert into pet_item
					 (ITEM_NO,
					  ITEM_NAME,			
					  ITEM_PRICE,
					  ITEM_DETAIL,
					  ITEM_TOTALCOUNT,
					  ITEM_SELLCOUNT,
					  ITEM_TYPE,
					  ITEM_IMG,
					  ITEM_DETAILIMG)
			values(ITEM_NO_SEQ.NEXTVAL,
					  #{ITEM_NAME},
				      #{ITEM_PRICE},
				      #{ITEM_DETAIL},
				      #{ITEM_TOTALCOUNT},
				      0,
				      #{ITEM_TYPE}
				      #{ITEM_IMG},
				      #{ITEM_DETAILIMG}				     
	</insert>
	
</mapper>